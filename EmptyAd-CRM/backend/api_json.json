{
  "api_endpoints": {
    "base_path": "/api/v1",
    "version": "1.0.0",
    "authentication": "JWT Bearer Token",
    
    "auth_endpoints": {
      "POST /auth/register": {
        "description": "Register new user",
        "request_body": {
          "email": "string (required)",
          "password": "string (required, min: 8)",
          "name": "string (required)",
          "full_name": "string",
          "phone": "string",
          "company": "string"
        },
        "response": {
          "201": {
            "user": "User object",
            "access_token": "JWT token",
            "refresh_token": "Refresh token"
          }
        },
        "authentication": "None"
      },
      
      "POST /auth/login": {
        "description": "User login",
        "request_body": {
          "email": "string (required)",
          "password": "string (required)"
        },
        "response": {
          "200": {
            "user": "User object",
            "access_token": "JWT token",
            "refresh_token": "Refresh token"
          }
        },
        "authentication": "None"
      },
      
      "POST /auth/refresh": {
        "description": "Refresh access token",
        "request_body": {
          "refresh_token": "string (required)"
        },
        "response": {
          "200": {
            "access_token": "New JWT token",
            "refresh_token": "New refresh token"
          }
        },
        "authentication": "None"
      },
      
      "POST /auth/logout": {
        "description": "Logout user",
        "response": {
          "200": { "message": "Logged out successfully" }
        },
        "authentication": "Required"
      }
    },
    
    "user_endpoints": {
      "GET /users": {
        "description": "Get all users (paginated)",
        "query_params": {
          "page": "number (default: 1)",
          "limit": "number (default: 10, max: 100)",
          "search": "string",
          "role": "CEO|CGO|CTO|admin|user",
          "is_online": "boolean"
        },
        "response": {
          "200": {
            "data": "Array of User objects",
            "meta": {
              "total": "number",
              "page": "number",
              "limit": "number",
              "totalPages": "number"
            }
          }
        },
        "permissions": ["admin", "CEO", "CGO", "CTO"]
      },
      
      "GET /users/me": {
        "description": "Get current user profile",
        "response": {
          "200": "User object"
        },
        "permissions": ["all authenticated users"]
      },
      
      "GET /users/:id": {
        "description": "Get user by ID",
        "path_params": {
          "id": "UUID (required)"
        },
        "response": {
          "200": "User object"
        },
        "permissions": ["admin", "CEO", "CGO", "CTO", "self"]
      },
      
      "PUT /users/:id": {
        "description": "Update user",
        "path_params": { "id": "UUID (required)" },
        "request_body": {
          "name": "string",
          "full_name": "string",
          "phone": "string",
          "location": "string",
          "company": "string",
          "bio": "string",
          "avatar_url": "string",
          "profile_image_url": "string"
        },
        "response": { "200": "Updated User object" },
        "permissions": ["admin", "CEO", "CGO", "CTO", "self"]
      },
      
      "DELETE /users/:id": {
        "description": "Delete user",
        "path_params": { "id": "UUID (required)" },
        "response": { "204": "No content" },
        "permissions": ["admin", "CEO"]
      },
      
      "PATCH /users/:id/role": {
        "description": "Update user role",
        "path_params": { "id": "UUID (required)" },
        "request_body": { "role": "CEO|CGO|CTO|admin|user" },
        "response": { "200": "Updated User object" },
        "permissions": ["admin", "CEO"]
      },
      
      "POST /users/:id/avatar": {
        "description": "Upload user avatar",
        "content_type": "multipart/form-data",
        "request_body": { "file": "image file (max 5MB)" },
        "response": { "200": { "avatar_url": "string" } },
        "permissions": ["self", "admin"]
      }
    },
    
    "client_endpoints": {
      "GET /clients": {
        "description": "Get all clients (paginated)",
        "query_params": {
          "page": "number (default: 1)",
          "limit": "number (default: 20)",
          "search": "string",
          "stage": "prospect|connected|replied|meeting|proposal|closed|lost",
          "assigned_to": "UUID",
          "sort_by": "created_at|updated_at|last_contact|deal_value",
          "sort_order": "ASC|DESC"
        },
        "response": {
          "200": {
            "data": "Array of Client objects with relations",
            "meta": "Pagination metadata"
          }
        },
        "permissions": ["all authenticated users"]
      },
      
      "GET /clients/stats": {
        "description": "Get client pipeline statistics",
        "response": {
          "200": {
            "by_stage": {
              "prospect": { "count": "number", "total_value": "number" },
              "connected": { "count": "number", "total_value": "number" },
              "...": "..."
            },
            "total_clients": "number",
            "total_deal_value": "number",
            "conversion_rate": "number"
          }
        },
        "permissions": ["all authenticated users"]
      },
      
      "GET /clients/:id": {
        "description": "Get client by ID with all relations",
        "path_params": { "id": "UUID (required)" },
        "query_params": {
          "include": "interactions,tasks,contracts,analytics,financial"
        },
        "response": {
          "200": "Client object with requested relations"
        },
        "permissions": ["all authenticated users"]
      },
      
      "POST /clients": {
        "description": "Create new client",
        "request_body": "CreateClientDto",
        "response": { "201": "Created Client object" },
        "permissions": ["all authenticated users"]
      },
      
      "PUT /clients/:id": {
        "description": "Update client",
        "path_params": { "id": "UUID (required)" },
        "request_body": "UpdateClientDto",
        "response": { "200": "Updated Client object" },
        "permissions": ["all authenticated users"]
      },
      
      "DELETE /clients/:id": {
        "description": "Delete client",
        "path_params": { "id": "UUID (required)" },
        "response": { "204": "No content" },
        "permissions": ["admin", "CEO", "CGO"]
      },
      
      "POST /clients/:id/contact": {
        "description": "Update last contact",
        "path_params": { "id": "UUID (required)" },
        "request_body": {
          "note": "string (required)",
          "next_follow_up": "date"
        },
        "response": { "200": "Updated Client object" },
        "permissions": ["all authenticated users"]
      },
      
      "PATCH /clients/:id/stage": {
        "description": "Update client stage",
        "path_params": { "id": "UUID (required)" },
        "request_body": {
          "stage": "prospect|connected|replied|meeting|proposal|closed|lost",
          "notes": "string"
        },
        "response": { "200": "Updated Client object" },
        "permissions": ["all authenticated users"]
      },
      
      "GET /clients/:id/financial-summary": {
        "description": "Get client financial summary",
        "path_params": { "id": "UUID (required)" },
        "query_params": {
          "start_date": "date (YYYY-MM-DD)",
          "end_date": "date (YYYY-MM-DD)"
        },
        "response": {
          "200": "ClientFinancialSummary object"
        },
        "permissions": ["admin", "CEO", "CGO", "CTO"]
      }
    },
    
    "task_endpoints": {
      "GET /tasks": {
        "description": "Get all tasks (paginated)",
        "query_params": {
          "page": "number",
          "limit": "number",
          "status": "pending|in_progress|completed",
          "priority": "low|medium|high",
          "assigned_to": "UUID",
          "client_id": "UUID",
          "task_group_id": "UUID",
          "due_date_from": "date",
          "due_date_to": "date",
          "overdue_only": "boolean"
        },
        "response": {
          "200": {
            "data": "Array of Task objects",
            "meta": "Pagination metadata"
          }
        },
        "permissions": ["all authenticated users"]
      },
      
      "GET /tasks/my-tasks": {
        "description": "Get tasks assigned to current user",
        "query_params": {
          "status": "pending|in_progress|completed",
          "priority": "low|medium|high",
          "overdue": "boolean"
        },
        "response": {
          "200": "Array of Task objects"
        },
        "permissions": ["all authenticated users"]
      },
      
      "GET /tasks/:id": {
        "description": "Get task by ID",
        "path_params": { "id": "UUID (required)" },
        "response": { "200": "Task object with relations" },
        "permissions": ["all authenticated users"]
      },
      
      "POST /tasks": {
        "description": "Create new task",
        "request_body": "CreateTaskDto",
        "response": { "201": "Created Task object" },
        "permissions": ["all authenticated users"]
      },
      
      "PUT /tasks/:id": {
        "description": "Update task",
        "path_params": { "id": "UUID (required)" },
        "request_body": "UpdateTaskDto",
        "response": { "200": "Updated Task object" },
        "permissions": ["all authenticated users"]
      },
      
      "DELETE /tasks/:id": {
        "description": "Delete task",
        "path_params": { "id": "UUID (required)" },
        "response": { "204": "No content" },
        "permissions": ["admin", "task creator", "task group owner"]
      },
      
      "PATCH /tasks/:id/status": {
        "description": "Update task status",
        "path_params": { "id": "UUID (required)" },
        "request_body": {
          "status": "pending|in_progress|completed",
          "completed_at": "date (optional, auto-set for completed)"
        },
        "response": { "200": "Updated Task object" },
        "permissions": ["task assignee", "admin", "task creator"]
      },
      
      "PATCH /tasks/:id/assign": {
        "description": "Assign task to user",
        "path_params": { "id": "UUID (required)" },
        "request_body": { "assigned_to": "UUID" },
        "response": { "200": "Updated Task object" },
        "permissions": ["admin", "task group owner", "task creator"]
      },
      
      "POST /tasks/bulk": {
        "description": "Bulk update tasks",
        "request_body": {
          "task_ids": "UUID[] (required)",
          "updates": {
            "status": "pending|in_progress|completed",
            "priority": "low|medium|high",
            "assigned_to": "UUID"
          }
        },
        "response": { "200": { "updated_count": "number" } },
        "permissions": ["admin", "CEO", "CGO", "CTO"]
      }
    },
    
    "task_group_endpoints": {
      "GET /task-groups": {
        "description": "Get all task groups",
        "query_params": {
          "created_by": "UUID",
          "user_id": "UUID"
        },
        "response": { "200": "Array of TaskGroup objects" },
        "permissions": ["all authenticated users"]
      },
      
      "GET /task-groups/:id": {
        "description": "Get task group with tasks",
        "path_params": { "id": "UUID (required)" },
        "response": {
          "200": "TaskGroup object with nested tasks"
        },
        "permissions": ["all authenticated users"]
      },
      
      "POST /task-groups": {
        "description": "Create task group",
        "request_body": {
          "name": "string (required)",
          "description": "string",
          "color": "string (hex color)",
          "tasks": "UUID[] (optional initial tasks)"
        },
        "response": { "201": "Created TaskGroup object" },
        "permissions": ["all authenticated users"]
      },
      
      "PUT /task-groups/:id": {
        "description": "Update task group",
        "path_params": { "id": "UUID (required)" },
        "request_body": "UpdateTaskGroupDto",
        "response": { "200": "Updated TaskGroup object" },
        "permissions": ["task group owner", "admin"]
      },
      
      "DELETE /task-groups/:id": {
        "description": "Delete task group",
        "path_params": { "id": "UUID (required)" },
        "response": { "204": "No content" },
        "permissions": ["task group owner", "admin"]
      },
      
      "POST /task-groups/:id/tasks": {
        "description": "Add task to group",
        "path_params": { "id": "UUID (required)" },
        "request_body": { "task_id": "UUID (required)" },
        "response": { "200": "TaskGroupMember object" },
        "permissions": ["task group owner", "admin"]
      },
      
      "PATCH /task-groups/:id/reorder": {
        "description": "Reorder tasks in group",
        "path_params": { "id": "UUID (required)" },
        "request_body": {
          "task_order": ["UUID1", "UUID2", "UUID3"]
        },
        "response": { "200": "Updated task order" },
        "permissions": ["task group owner", "admin"]
      }
    },
    
    "interaction_endpoints": {
      "GET /interactions": {
        "description": "Get interactions (paginated)",
        "query_params": {
          "client_id": "UUID",
          "user_id": "UUID",
          "type": "linkedin_connection|linkedin_message|email|phone_call|meeting",
          "status": "sent|received|replied|ignored|completed",
          "start_date": "date",
          "end_date": "date",
          "has_attachments": "boolean"
        },
        "response": {
          "200": {
            "data": "Array of Interaction objects",
            "meta": "Pagination metadata"
          }
        },
        "permissions": ["all authenticated users"]
      },
      
      "GET /clients/:clientId/interactions": {
        "description": "Get client interactions",
        "path_params": { "clientId": "UUID (required)" },
        "response": { "200": "Array of Interaction objects" },
        "permissions": ["all authenticated users"]
      },
      
      "POST /interactions": {
        "description": "Create interaction",
        "request_body": "CreateInteractionDto",
        "response": { "201": "Created Interaction object" },
        "permissions": ["all authenticated users"]
      },
      
      "POST /interactions/bulk": {
        "description": "Bulk create interactions (import)",
        "request_body": "CreateInteractionDto[]",
        "response": { "201": { "created_count": "number" } },
        "permissions": ["admin", "CEO", "CGO"]
      },
      
      "POST /interactions/:id/optimize": {
        "description": "AI optimize interaction message",
        "path_params": { "id": "UUID (required)" },
        "response": { "200": "AiOptimization object" },
        "permissions": ["all authenticated users"]
      },
      
      "GET /interactions/analytics": {
        "description": "Get interaction analytics",
        "query_params": {
          "start_date": "date",
          "end_date": "date",
          "group_by": "day|week|month|type|user"
        },
        "response": {
          "200": {
            "total_interactions": "number",
            "by_type": { "email": "number", "phone_call": "number", "...": "..." },
            "by_status": { "sent": "number", "completed": "number", "...": "..." },
            "response_rate": "number",
            "avg_response_time": "number (hours)"
          }
        },
        "permissions": ["admin", "CEO", "CGO", "CTO"]
      }
    },
    
    "calendar_endpoints": {
      "GET /calendar/events": {
        "description": "Get calendar events",
        "query_params": {
          "start_date": "date (required)",
          "end_date": "date (required)",
          "type": "meeting|sync|block|personal",
          "client_id": "UUID",
          "is_collective": "boolean",
          "is_shared": "boolean"
        },
        "response": { "200": "Array of CalendarEvent objects" },
        "permissions": ["all authenticated users"]
      },
      
      "GET /calendar/upcoming": {
        "description": "Get upcoming events",
        "query_params": {
          "days": "number (default: 7)",
          "limit": "number (default: 10)"
        },
        "response": { "200": "Array of CalendarEvent objects" },
        "permissions": ["all authenticated users"]
      },
      
      "POST /calendar/events": {
        "description": "Create calendar event",
        "request_body": "CreateCalendarEventDto",
        "response": { "201": "Created CalendarEvent object" },
        "permissions": ["all authenticated users"]
      },
      
      "PUT /calendar/events/:id": {
        "description": "Update calendar event",
        "path_params": { "id": "UUID (required)" },
        "request_body": "UpdateCalendarEventDto",
        "response": { "200": "Updated CalendarEvent object" },
        "permissions": ["event creator", "admin"]
      },
      
      "DELETE /calendar/events/:id": {
        "description": "Delete calendar event",
        "path_params": { "id": "UUID (required)" },
        "response": { "204": "No content" },
        "permissions": ["event creator", "admin"]
      },
      
      "POST /calendar/events/:id/notes": {
        "description": "Add meeting notes",
        "path_params": { "id": "UUID (required)" },
        "request_body": {
          "raw_notes": "string (required)",
          "action_items": "json array"
        },
        "response": { "201": "MeetingNotes object" },
        "permissions": ["all authenticated users"]
      }
    },
    
    "financial_endpoints": {
      "budgets": {
        "GET /budgets": {
          "description": "Get budgets",
          "query_params": {
            "client_id": "UUID",
            "status": "draft|active|completed|exceeded",
            "period": "weekly|monthly|quarterly|yearly|project"
          },
          "response": { "200": "Array of Budget objects" },
          "permissions": ["admin", "CEO", "CGO", "CTO"]
        },
        
        "POST /budgets": {
          "description": "Create budget",
          "request_body": "CreateBudgetDto",
          "response": { "201": "Created Budget object" },
          "permissions": ["admin", "CEO", "CGO", "CTO"]
        },
        
        "GET /budgets/:id": {
          "description": "Get budget with expenses and payments",
          "path_params": { "id": "UUID (required)" },
          "response": { "200": "Budget object with relations" },
          "permissions": ["admin", "CEO", "CGO", "CTO"]
        },
        
        "PATCH /budgets/:id/status": {
          "description": "Update budget status",
          "path_params": { "id": "UUID (required)" },
          "request_body": { "status": "draft|active|completed|exceeded" },
          "response": { "200": "Updated Budget object" },
          "permissions": ["admin", "CEO", "CGO"]
        }
      },
      
      "payments": {
        "GET /payments": {
          "description": "Get payments",
          "query_params": {
            "client_id": "UUID",
            "budget_id": "UUID",
            "status": "pending|completed|failed|cancelled|refunded",
            "payment_type": "received|sent",
            "payment_date_from": "date",
            "payment_date_to": "date"
          },
          "response": { "200": "Array of Payment objects" },
          "permissions": ["admin", "CEO", "CGO", "CTO"]
        },
        
        "POST /payments": {
          "description": "Create payment",
          "request_body": "CreatePaymentDto",
          "response": { "201": "Created Payment object" },
          "permissions": ["admin", "CEO", "CGO", "CTO"]
        },
        
        "PATCH /payments/:id/status": {
          "description": "Update payment status",
          "path_params": { "id": "UUID (required)" },
          "request_body": { "status": "pending|completed|failed|cancelled|refunded" },
          "response": { "200": "Updated Payment object" },
          "permissions": ["admin", "CEO", "CGO"]
        }
      },
      
      "expenses": {
        "GET /expenses": {
          "description": "Get expenses",
          "query_params": {
            "client_id": "UUID",
            "budget_id": "UUID",
            "vendor_id": "UUID",
            "status": "pending|approved|rejected|paid",
            "expense_date_from": "date",
            "expense_date_to": "date"
          },
          "response": { "200": "Array of Expense objects" },
          "permissions": ["admin", "CEO", "CGO", "CTO"]
        },
        
        "POST /expenses": {
          "description": "Create expense",
          "content_type": "multipart/form-data",
          "request_body": {
            "...": "Expense fields",
            "receipt": "file (optional)"
          },
          "response": { "201": "Created Expense object" },
          "permissions": ["all authenticated users"]
        },
        
        "PATCH /expenses/:id/status": {
          "description": "Update expense status",
          "path_params": { "id": "UUID (required)" },
          "request_body": { "status": "pending|approved|rejected|paid" },
          "response": { "200": "Updated Expense object" },
          "permissions": ["admin", "CEO", "CGO"]
        }
      },
      
      "reports": {
        "GET /financial/reports/client-profitability": {
          "description": "Generate client profitability report",
          "query_params": {
            "client_id": "UUID (optional)",
            "start_date": "date",
            "end_date": "date",
            "format": "json|csv|pdf"
          },
          "response": {
            "200": "Report data or file download"
          },
          "permissions": ["admin", "CEO", "CGO", "CTO"]
        },
        
        "GET /financial/reports/budget-vs-actual": {
          "description": "Budget vs actual report",
          "query_params": {
            "budget_id": "UUID (optional)",
            "period": "monthly|quarterly|yearly"
          },
          "response": { "200": "Report data" },
          "permissions": ["admin", "CEO", "CGO", "CTO"]
        }
      }
    },
    
    "ai_endpoints": {
      "POST /ai/chat": {
        "description": "Chat with AI assistant",
        "request_body": {
          "message": "string (required)",
          "context": {
            "client_id": "UUID",
            "interaction_id": "UUID",
            "task_id": "UUID"
          },
          "session_id": "UUID (optional)"
        },
        "response": {
          "200": {
            "response": "string",
            "session_id": "UUID",
            "suggestions": "string[]"
          }
        },
        "permissions": ["all authenticated users"]
      },
      
      "POST /ai/optimize-message": {
        "description": "Optimize message with AI",
        "request_body": {
          "message": "string (required)",
          "tone": "professional|friendly|persuasive|formal",
          "target": "client|prospect|team",
          "max_length": "number"
        },
        "response": {
          "200": {
            "original": "string",
            "optimized": "string",
            "confidence_score": "number",
            "improvements": "string[]"
          }
        },
        "permissions": ["all authenticated users"]
      },
      
      "POST /ai/generate-email": {
        "description": "Generate email with AI",
        "request_body": {
          "purpose": "follow_up|introduction|proposal|meeting_invite",
          "client_id": "UUID",
          "key_points": "string[]",
          "tone": "professional|friendly|persuasive"
        },
        "response": { "200": { "subject": "string", "body": "string" } },
        "permissions": ["all authenticated users"]
      }
    },
    
    "file_endpoints": {
      "POST /files/upload": {
        "description": "Upload file",
        "content_type": "multipart/form-data",
        "request_body": {
          "file": "file (required)",
          "entity_type": "client|user|task|interaction|meeting_note",
          "entity_id": "UUID (required)",
          "description": "string"
        },
        "response": {
          "200": {
            "id": "UUID",
            "file_name": "string",
            "file_url": "string",
            "mime_type": "string",
            "file_size": "number"
          }
        },
        "permissions": ["all authenticated users"]
      },
      
      "GET /files/:entityType/:entityId": {
        "description": "Get files for entity",
        "path_params": {
          "entityType": "client|user|task|interaction|meeting_note",
          "entityId": "UUID (required)"
        },
        "response": { "200": "Array of FileAttachment objects" },
        "permissions": ["all authenticated users"]
      },
      
      "DELETE /files/:id": {
        "description": "Delete file",
        "path_params": { "id": "UUID (required)" },
        "response": { "204": "No content" },
        "permissions": ["file owner", "admin"]
      }
    },
    
    "dashboard_endpoints": {
      "GET /dashboard/overview": {
        "description": "Get dashboard overview",
        "response": {
          "200": {
            "client_stats": {
              "total": "number",
              "new_this_month": "number",
              "by_stage": { "...": "..." }
            },
            "task_stats": {
              "total": "number",
              "completed_today": "number",
              "overdue": "number",
              "by_priority": { "...": "..." }
            },
            "financial_stats": {
              "revenue_this_month": "number",
              "expenses_this_month": "number",
              "profit_margin": "number",
              "top_clients": "Array"
            },
            "activity_stats": {
              "recent_interactions": "Array",
              "upcoming_events": "Array",
              "team_activity": "Array"
            }
          }
        },
        "permissions": ["all authenticated users"]
      },
      
      "GET /dashboard/team-performance": {
        "description": "Get team performance metrics",
        "query_params": {
          "start_date": "date",
          "end_date": "date"
        },
        "response": {
          "200": {
            "by_user": [
              {
                "user": "User object",
                "clients_added": "number",
                "tasks_completed": "number",
                "interactions": "number",
                "revenue_generated": "number"
              }
            ],
            "team_totals": { "...": "..." }
          }
        },
        "permissions": ["admin", "CEO", "CGO", "CTO"]
      }
    }
  },

  "webhook_endpoints": {
    "POST /webhooks/stripe": {
      "description": "Stripe payment webhook",
      "authentication": "Stripe signature"
    },
    
    "POST /webhooks/calendar-sync": {
      "description": "Calendar sync webhook",
      "authentication": "API key"
    },
    
    "POST /webhooks/email-inbound": {
      "description": "Inbound email processing",
      "authentication": "API key"
    }
  },

  "websocket_endpoints": {
    "WS /ws": {
      "description": "WebSocket connection for real-time updates",
      "events": {
        "connect": "Authentication required",
        "disconnect": "User goes offline",
        "chat_message": "Real-time chat",
        "task_update": "Task status changes",
        "client_update": "Client stage changes",
        "notification": "User notifications"
      }
    }
  }
}